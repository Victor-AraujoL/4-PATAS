<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Associa√ß√£o 4 Patas - Gerenciamento de Pets</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="css/pets.css"/>
</head>
<body>
    <div class="paws paw1">üêæ</div>
    <div class="paws paw2">üêæ</div>
    <div class="paws paw3">üêæ</div>
    <header>
        <div class="header-container">
            <div class="left-side">
                <div class="logo">
                    <img src="assets/logo.png.png" alt="Logo 4 Patas" style="width: 50px; height: 50px; object-fit: contain;">
                </div>
                <button class="back-btn" id="backBtn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                    </svg>
                    Voltar ao Menu
                </button>
            </div>
            <div class="right-side">
                <div class="action-buttons">
                    <a href="cadastro_pet.html" class="add-btn" id="addPetBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                        Adicionar Pet
                    </a>
                    <button class="export-btn" id="exportPdfBtn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
                        </svg>
                        Exportar PDF
                    </button>
                </div>
                <div class="user-info">
                    <span class="user-name">Ol√°, Usu√°rio</span>
                    <button class="logout-btn">Sair</button>
                </div>
            </div>
        </div>
    </header>
    
    <main>
        <div class="search-bar">
            <input type="text" class="search-input" placeholder="Buscar pet por nome, esp√©cie, ra√ßa...">
            <button class="filter-btn" id="filterBtn">Filtrar</button>
        </div>
        
        <div class="pets-grid" id="petsGrid">
            <!-- Os cart√µes de pets ser√£o gerados dinamicamente pelo JavaScript -->
        </div>
        
        <div class="pagination" id="pagination">
            <button>1</button>
            <button class="active">2</button>
            <button>3</button>
            <button>></button>
        </div>
    </main>
    
    <!-- Modal para adicionar/editar pet -->
    <div class="modal" id="petModal">
        <div class="modal-content">
            <button class="close-modal" id="closeModal">&times;</button>
            <h2 class="modal-title" id="modalTitle">Adicionar Novo Pet</h2>
            <form id="petForm">
                <input type="hidden" id="petId">
                <div class="form-group">
                    <label class="form-label" for="petName">Nome</label>
                    <input type="text" class="form-control" id="petName" required>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petSpecies">Esp√©cie</label>
                    <select class="form-select" id="petSpecies" required>
                        <option value="">Selecione</option>
                        <option value="Cachorro">Cachorro</option>
                        <option value="Gato">Gato</option>
                        <option value="Ave">Ave</option>
                        <option value="Roedor">Roedor</option>
                        <option value="Outro">Outro</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petBreed">Ra√ßa</label>
                    <input type="text" class="form-control" id="petBreed">
                </div>
                <div class="form-group">
                    <label class="form-label" for="petColor">Cor</label>
                    <input type="text" class="form-control" id="petColor">
                </div>
                <div class="form-group">
                    <label class="form-label" for="petSize">Porte</label>
                    <select class="form-select" id="petSize" required>
                        <option value="">Selecione</option>
                        <option value="P">Pequeno</option>
                        <option value="M">M√©dio</option>
                        <option value="G">Grande</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petAge">Idade (em meses)</label>
                    <input type="number" class="form-control" id="petAge" min="0">
                </div>
                <div class="form-group">
                    <label class="form-label" for="petWeight">Peso (kg)</label>
                    <input type="number" class="form-control" id="petWeight" step="0.01" min="0">
                </div>
                <div class="form-group">
                    <label class="form-label" for="petCharacteristics">Caracter√≠sticas</label>
                    <textarea class="form-control" id="petCharacteristics" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petAdoptionStatus">Situa√ß√£o de Ado√ß√£o</label>
                    <select class="form-select" id="petAdoptionStatus" required>
                        <option value="">Selecione</option>
                        <option value="Dispon√≠vel">Dispon√≠vel para ado√ß√£o</option>
                        <option value="Adotado">J√° adotado</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petNeutered">Castrado</label>
                    <select class="form-select" id="petNeutered">
                        <option value="S">Sim</option>
                        <option value="N">N√£o</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petSex">Sexo</label>
                    <select class="form-select" id="petSex" required>
                        <option value="">Selecione</option>
                        <option value="M">Macho</option>
                        <option value="F">F√™mea</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petOrigin">Origem</label>
                    <input type="text" class="form-control" id="petOrigin">
                </div>
               
                <div class="form-group">
                    <label class="form-label">Endere√ßo</label>
                    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1rem;">
                        <input type="text" class="form-control" id="petAddress" placeholder="Logradouro">
                        <input type="text" class="form-control" id="petNumber" placeholder="N√∫mero">
                    </div>
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="petComplement" placeholder="Complemento">
                </div>
                <div class="form-group">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                        <input type="text" class="form-control" id="petNeighborhood" placeholder="Bairro">
                        <input type="text" class="form-control" id="petCity" placeholder="Cidade">
                        <input type="text" class="form-control" id="petState" placeholder="Estado">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" for="petPhone">Telefone</label>
                    <input type="text" class="form-control" id="petPhone" placeholder="(00) 00000-0000">
                </div>
                <div class="form-group">
                    <label class="form-label" for="petResponsible">Respons√°vel</label>
                    <input type="text" class="form-control" id="petResponsible">
                </div>
                <div class="form-buttons">
                    <button type="button" class="btn-cancel" id="cancelBtn">Cancelar</button>
                    <button type="submit" class="btn-save">Salvar</button>
                </div>
            </form>
        </div>
    </div>
    
    <footer>
        &copy; 2025 Sistema Pet - Todos os direitos reservados
    </footer>

    <script>
        // Dados simulados de pets (normalmente viriam do backend)
        const petsMockData = [
            {
                id: 1,
                nome: "Rex",
                especie: "Cachorro",
                raca: "Labrador",
                cor: "Caramelo",
                porte: "G",
                idade: 24,
                peso: 25.5,
                caracteristicas: "D√≥cil, brincalh√£o e bem treinado",
                situacao_adocao: "Dispon√≠vel",
                castrado: "S",
                sexo: "M",
                origem: "Resgate",
                numero: "123",
                complemento: "Casa",
                bairro: "Centro",
                cidade: "S√£o Paulo",
                estado: "SP",
                telefone: "(11) 99999-9999",
                responsavel: "Jo√£o Silva",
                data_cadastro: "2025-05-15T10:30:00"
            },
            {
                id: 2,
                nome: "Luna",
                especie: "Gato",
                raca: "Siam√™s",
                cor: "Branco e Marrom",
                porte: "P",
                idade: 12,
                peso: 3.2,
                caracteristicas: "Calma e independente",
                situacao_adocao: "Adotado",
                castrado: "S",
                sexo: "F",
                origem: "Doa√ß√£o",
                logradouro: "Av. Paulista",
                numero: "1000",
                complemento: "Apto 101",
                bairro: "Bela Vista",
                cidade: "S√£o Paulo",
                estado: "SP",
                telefone: "(11) 98888-8888",
                responsavel: "Maria Oliveira",
                data_cadastro: "2025-05-14T14:15:00"
            },
            {
                id: 3,
                nome: "Bob",
                especie: "Cachorro",
                raca: "Vira-lata",
                cor: "Preto",
                porte: "M",
                idade: 36,
                peso: 15.0,
                caracteristicas: "Muito amig√°vel e gosta de crian√ßas",
                situacao_adocao: "Dispon√≠vel",
                castrado: "N",
                sexo: "M",
                origem: "Resgate",
                logradouro: "Rua dos Pinheiros",
                numero: "456",
                complemento: "",
                bairro: "Pinheiros",
                cidade: "S√£o Paulo",
                estado: "SP",
                telefone: "(11) 97777-7777",
                responsavel: "Pedro Santos",
                data_cadastro: "2025-05-13T09:45:00"
            },
            {
                id: 4,
                nome: "Nina",
                especie: "Gato",
                raca: "Persa",
                cor: "Cinza",
                porte: "P",
                idade: 18,
                peso: 4.1,
                caracteristicas: "Gosta de carinho e dormir",
                situacao_adocao: "Dispon√≠vel",
                castrado: "S",
                sexo: "F",
                origem: "Doa√ß√£o",
                logradouro: "Rua Augusta",
                numero: "789",
                complemento: "Casa 2",
                bairro: "Consola√ß√£o",
                cidade: "S√£o Paulo",
                estado: "SP",
                telefone: "(11) 96666-6666",
                responsavel: "Ana Sousa",
                data_cadastro: "2025-05-12T16:20:00"
            },
            {
                id: 5,
                nome: "Max",
                especie: "Cachorro",
                raca: "Golden Retriever",
                cor: "Dourado",
                porte: "G",
                idade: 8,
                peso: 20.7,
                caracteristicas: "Filhote muito ativo e brincalh√£o",
                situacao_adocao: "Adotado",
                castrado: "N",
                sexo: "M",
                origem: "Criador",
                logradouro: "Alameda Santos",
                numero: "222",
                complemento: "Apto 303",
                bairro: "Jardins",
                cidade: "S√£o Paulo",
                estado: "SP",
                telefone: "(11) 95555-5555",
                responsavel: "Carlos Ferreira",
                data_cadastro: "2025-05-10T11:10:00"
            },
            {
                id: 6,
                nome: "Mia",
                especie: "Gato",
                raca: "Maine Coon",
                cor: "Mesclado",
                porte: "M",
                idade: 30,
                peso: 6.5,
                caracteristicas: "Pelagem longa e densa, gosta de brincar",
                situacao_adocao: "Dispon√≠vel",
                castrado: "S",
                sexo: "F",
                origem: "Resgate",
                logradouro: "Rua Oscar Freire",
                numero: "333",
                complemento: "",
                bairro: "Jardim Paulista",
                cidade: "S√£o Paulo",
                estado: "SP",
                telefone: "(11) 94444-4444",
                responsavel: "Beatriz Lima",
                data_cadastro: "2025-05-08T15:30:00"
            }
        ];

        // Ordenar os pets por data de cadastro (mais recentes primeiro)
        const sortedPets = [...petsMockData].sort((a, b) => {
            return new Date(b.data_cadastro) - new Date(a.data_cadastro);
        });

        // Formata√ß√£o da idade dos pets (meses para anos/meses)
        function formatAge(months) {
            if (months < 12) {
                return `${months} meses`;
            } else {
                const years = Math.floor(months / 12);
                const remainingMonths = months % 12;
                if (remainingMonths === 0) {
                    return `${years} ${years === 1 ? 'ano' : 'anos'}`;
                } else {
                    return `${years} ${years === 1 ? 'ano' : 'anos'} e ${remainingMonths} ${remainingMonths === 1 ? 'm√™s' : 'meses'}`;
                }
            }
        }
        
        // Fun√ß√£o para abrir o modal de adi√ß√£o de pet
        function openAddPetModal() {
            document.getElementById('modalTitle').textContent = 'Adicionar Novo Pet';
            document.getElementById('petId').value = '';
            document.getElementById('petForm').reset();
            document.getElementById('petModal').style.display = 'flex';
        }
        
        // Fun√ß√£o para abrir o modal de edi√ß√£o de pet
        function openEditPetModal(petId) {
            const pet = petsMockData.find(p => p.id === petId);
            if (!pet) return;
            
            document.getElementById('modalTitle').textContent = `Editar Pet: ${pet.nome}`;
            document.getElementById('petId').value = pet.id;
            document.getElementById('petName').value = pet.nome;
            document.getElementById('petSpecies').value = pet.especie;
            document.getElementById('petBreed').value = pet.raca;
            document.getElementById('petColor').value = pet.cor;
            document.getElementById('petSize').value = pet.porte;
            document.getElementById('petAge').value = pet.idade;
            document.getElementById('petWeight').value = pet.peso;
            document.getElementById('petCharacteristics').value = pet.caracteristicas;
            document.getElementById('petAdoptionStatus').value = pet.situacao_adocao;
            document.getElementById('petNeutered').value = pet.castrado;
            document.getElementById('petSex').value = pet.sexo;
            document.getElementById('petOrigin').value = pet.origem;
            document.getElementById('petAddress').value = pet.logradouro;
            document.getElementById('petNumber').value = pet.numero;
            document.getElementById('petComplement').value = pet.complemento;
            document.getElementById('petNeighborhood').value = pet.bairro;
            document.getElementById('petCity').value = pet.cidade;
            document.getElementById('petState').value = pet.estado;
            document.getElementById('petPhone').value = pet.telefone;
            document.getElementById('petResponsible').value = pet.responsavel;
            
            document.getElementById('petModal').style.display = 'flex';
        }
        
        // Fun√ß√£o para fechar o modal
        function closeModal() {
            document.getElementById('petModal').style.display = 'none';
        }
        
        // Fun√ß√£o para salvar um pet (adicionar ou atualizar)
        function savePet(event) {
            event.preventDefault();
            
            const petId = document.getElementById('petId').value;
            const formData = {
                id: petId ? parseInt(petId) : petsMockData.length + 1,
                nome: document.getElementById('petName').value,
                especie: document.getElementById('petSpecies').value,
                raca: document.getElementById('petBreed').value,
                cor: document.getElementById('petColor').value,
                porte: document.getElementById('petSize').value,
                idade: parseInt(document.getElementById('petAge').value) || 0,
                peso: parseFloat(document.getElementById('petWeight').value) || 0,
                caracteristicas: document.getElementById('petCharacteristics').value,
                situacao_adocao: document.getElementById('petAdoptionStatus').value,
                castrado: document.getElementById('petNeutered').value,
                sexo: document.getElementById('petSex').value,
                origem: document.getElementById('petOrigin').value,
                logradouro: document.getElementById('petAddress').value,
                numero: document.getElementById('petNumber').value,
                complemento: document.getElementById('petComplement').value,
                bairro: document.getElementById('petNeighborhood').value,
                cidade: document.getElementById('petCity').value,
                estado: document.getElementById('petState').value,
                telefone: document.getElementById('petPhone').value,
                responsavel: document.getElementById('petResponsible').value,
                data_cadastro: new Date().toISOString()
            };
            
            // Se estiver editando, atualiza o pet existente
            if (petId) {
                const index = petsMockData.findIndex(p => p.id === parseInt(petId));
                if (index !== -1) {
                    // Preservar a data de cadastro original
                    formData.data_cadastro = petsMockData[index].data_cadastro;
                    petsMockData[index] = formData;
                }
            } else {
                // Adicionar novo pet
                petsMockData.push(formData);
            }
            
            // Ordenar e renderizar novamente
            const sortedPets = [...petsMockData].sort((a, b) => {
                return new Date(b.data_cadastro) - new Date(a.data_cadastro);
            });
            
            renderPetCards(sortedPets);
            closeModal();
            
            // Feedback visual
            alert(`Pet ${petId ? 'atualizado' : 'adicionado'} com sucesso!`);
        }
        
        // Fun√ß√£o para filtrar pets
        function filterPets() {
            const searchTerm = document.querySelector('.search-input').value.toLowerCase();
            
            if (!searchTerm) {
                // Se n√£o houver termo de busca, mostrar todos os pets ordenados por data
                renderPetCards([...petsMockData].sort((a, b) => {
                    return new Date(b.data_cadastro) - new Date(a.data_cadastro);
                }));
                return;
            }
            
            const filteredPets = petsMockData.filter(pet => {
                return (
                    pet.nome.toLowerCase().includes(searchTerm) ||
                    pet.especie.toLowerCase().includes(searchTerm) ||
                    pet.raca.toLowerCase().includes(searchTerm) ||
                    pet.cor.toLowerCase().includes(searchTerm) ||
                    pet.caracteristicas.toLowerCase().includes(searchTerm) ||
                    pet.responsavel.toLowerCase().includes(searchTerm)
                );
            });
            
            renderPetCards(filteredPets);
        }
        
        // Fun√ß√£o para exportar para PDF
        function exportToPDF() {
            alert("Funcionalidade de exporta√ß√£o para PDF acionada. Em um sistema real, isso geraria um PDF com os pets filtrados.");
            // Em uma implementa√ß√£o real, aqui seria utilizada uma biblioteca como jsPDF ou 
            // uma chamada para o backend gerar o PDF com os dados atuais
        }
        
        // Inicializa√ß√£o da p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar os pets iniciais
            renderPetCards(sortedPets);
            
            // Event listeners
            document.getElementById('addPetBtn').addEventListener('click', function() {
                window.location.href = 'cadastro_pet.html';
            });
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('cancelBtn').addEventListener('click', closeModal);
            document.getElementById('petForm').addEventListener('submit', savePet);
            document.getElementById('filterBtn').addEventListener('click', filterPets);
            document.getElementById('exportPdfBtn').addEventListener('click', exportToPDF);
            
            // Evento para tecla Enter no campo de busca
            document.querySelector('.search-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    filterPets();
                }
            });
            
            // Evento para voltar ao menu
            document.querySelector('.back-btn').addEventListener('click', function() {
                // Em um sistema real, isso redirecionaria para a tela de menu
                window.location.href = 'index.html';
            });
            
            // Manipula√ß√£o da pagina√ß√£o (simplificado para demonstra√ß√£o)
            document.querySelectorAll('#pagination button').forEach(button => {
                button.addEventListener('click', function() {
                    document.querySelectorAll('#pagination button').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    this.classList.add('active');
                    // Aqui seria implementada a l√≥gica real de pagina√ß√£o
                });
            });
        });
        
        // Fun√ß√£o para renderizar os cart√µes de pets
        function renderPetCards(pets) {
    const petsGrid = document.getElementById('petsGrid');
    petsGrid.innerHTML = '';
    
    pets.forEach(pet => {
        const petCard = document.createElement('div');
        petCard.className = 'pet-card';
        
        const cadastroDate = new Date(pet.data_cadastro);
        const formattedDate = cadastroDate.toLocaleDateString('pt-BR');
        
       
        petCard.innerHTML = `
         
            <div class="pet-info">
                <h3 class="pet-name">${pet.nome}</h3>
                <div class="pet-details">
                    <div class="pet-detail"><span class="pet-detail-label">Esp√©cie:</span> <span>${pet.especie}</span></div>
                    <div class="pet-detail"><span class="pet-detail-label">Ra√ßa:</span> <span>${pet.raca}</span></div>
                    <div class="pet-detail"><span class="pet-detail-label">Idade:</span> <span>${formatAge(pet.idade)}</span></div>
                      <div class="pet-detail"><span class="pet-detail-label">Sexo:</span> <span>${pet.sexo}</span></div>
                    <div class="pet-detail"><span class="pet-detail-label">Cadastro:</span> <span>${formattedDate}</span></div>
                </div>
            </div>
        `;
        
        // üîë Agora o card inteiro √© clic√°vel
        petCard.addEventListener('click', () => {
            openEditPetModal(pet.id);
        });

        petsGrid.appendChild(petCard);
    });
}
            
            // Adicionar event listeners √†s imagens dos pets
            document.querySelectorAll('.pet-image').forEach(img => {
                img.addEventListener('click', function() {
                    const petId = parseInt(this.getAttribute('data-id'));
                    openEditPetModal(petId);
                });
            });
        
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</html>
